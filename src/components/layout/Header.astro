---
import Icon from '../ui/Icon.astro';
import Button from '../ui/Button.astro';
---

<header class="fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100">
  <div class="container mx-auto px-4">
    <nav class="flex items-center justify-between h-16 lg:h-20">
      <!-- Logo -->
      <div class="flex items-center space-x-2">
        <div class="w-8 h-8 bg-gradient-to-br from-primary-600 to-secondary-600 rounded-lg flex items-center justify-center">
          <Icon name="code" size="20" class="text-white" />
        </div>
        <span class="text-xl font-bold text-gray-900">Rubin Tech</span>
      </div>
      
      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-8">
        <a href="#inicio" class="text-gray-600 hover:text-primary-600 transition-colors font-medium">Inicio</a>
        <a href="#servicios" class="text-gray-600 hover:text-primary-600 transition-colors font-medium">Servicios</a>
        <a href="#proyectos" class="text-gray-600 hover:text-primary-600 transition-colors font-medium">Proyectos</a>
        <a href="#testimonios" class="text-gray-600 hover:text-primary-600 transition-colors font-medium">Testimonios</a>
        <a href="#contacto" class="text-gray-600 hover:text-primary-600 transition-colors font-medium">Contacto</a>
      </div>
      
      <!-- Desktop CTA -->
      <div class="hidden lg:flex items-center space-x-4">
        <Button variant="outline" size="sm" href="#contacto">
          Consulta Gratis
        </Button>
        <Button variant="primary" size="sm" href="#contacto">
          Empezar Proyecto
        </Button>
      </div>
      
      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-button"
        class="lg:hidden p-2 text-gray-600 hover:text-primary-600 transition-colors"
        aria-label="Abrir menÃº"
      >
        <Icon name="menu" size="24" />
      </button>
    </nav>
  </div>
  
  <!-- Mobile Menu -->
  <div 
    id="mobile-menu" 
    class="lg:hidden fixed inset-0 top-16 bg-white/95 backdrop-blur-sm transform translate-x-full transition-transform duration-300 ease-in-out z-40"
  >
    <div class="container mx-auto px-4 py-8">
      <nav class="flex flex-col space-y-6">
        <a href="#inicio" class="text-lg font-medium text-gray-600 hover:text-primary-600 transition-colors mobile-menu-link">Inicio</a>
        <a href="#servicios" class="text-lg font-medium text-gray-600 hover:text-primary-600 transition-colors mobile-menu-link">Servicios</a>
        <a href="#proyectos" class="text-lg font-medium text-gray-600 hover:text-primary-600 transition-colors mobile-menu-link">Proyectos</a>
        <a href="#testimonios" class="text-lg font-medium text-gray-600 hover:text-primary-600 transition-colors mobile-menu-link">Testimonios</a>
        <a href="#contacto" class="text-lg font-medium text-gray-600 hover:text-primary-600 transition-colors mobile-menu-link">Contacto</a>
        
        <div class="pt-6 border-t border-gray-200 space-y-4">
          <Button variant="outline" size="md" href="#contacto" class="w-full">
            Consulta Gratis
          </Button>
          <Button variant="primary" size="md" href="#contacto" class="w-full">
            Empezar Proyecto
          </Button>
        </div>
      </nav>
    </div>
  </div>
</header>

<script>
  // Mobile menu functionality
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');
  
  let isMenuOpen = false;
  
  function toggleMenu() {
    isMenuOpen = !isMenuOpen;
    if (isMenuOpen) {
      mobileMenu?.classList.remove('translate-x-full');
      document.body.style.overflow = 'hidden';
    } else {
      mobileMenu?.classList.add('translate-x-full');
      document.body.style.overflow = '';
    }
  }
  
  mobileMenuButton?.addEventListener('click', toggleMenu);
  
  // Close menu when clicking on links
  mobileMenuLinks.forEach(link => {
    link.addEventListener('click', () => {
      if (isMenuOpen) {
        toggleMenu();
      }
    });
  });
  
  // Close menu when clicking outside
  mobileMenu?.addEventListener('click', (e) => {
    if (e.target === mobileMenu) {
      toggleMenu();
    }
  });
  
  // Close menu on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isMenuOpen) {
      toggleMenu();
    }
  });
  
  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const headerHeight = 80;
        const targetPosition = target.offsetTop - headerHeight;
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });
</script>